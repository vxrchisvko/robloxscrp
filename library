local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")

local Library = {}

function Library:CreateWindow(title)
    local ScreenGui = Instance.new("ScreenGui", game.Players.LocalPlayer:WaitForChild("PlayerGui"))
    ScreenGui.Name = "AestheticUILib"
    ScreenGui.ResetOnSpawn = false

    -- Main Frame
    local MainFrame = Instance.new("Frame")
    MainFrame.Size = UDim2.new(0, 620, 0, 400)
    MainFrame.Position = UDim2.new(0.5, -310, 0.5, -200)
    MainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
    MainFrame.BorderSizePixel = 0
    MainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
    MainFrame.Parent = ScreenGui

    local corner = Instance.new("UICorner", MainFrame)
    corner.CornerRadius = UDim.new(0, 12)

    -- Dragging
    local dragging, dragInput, dragStart, startPos

    MainFrame.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            dragStart = input.Position
            startPos = MainFrame.Position

            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)

    UserInputService.InputChanged:Connect(function(input)
        if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
            local delta = input.Position - dragStart
            MainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end)

-- Unload / Close Button
local CloseButton = Instance.new("TextButton")
CloseButton.Size = UDim2.new(0, 30, 0, 30)
CloseButton.Position = UDim2.new(1, -35, 0, 5)
CloseButton.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
CloseButton.Text = "âœ•"
CloseButton.Font = Enum.Font.GothamBold
CloseButton.TextSize = 18
CloseButton.TextColor3 = Color3.fromRGB(200, 200, 200)
CloseButton.Parent = MainFrame

local CloseCorner = Instance.new("UICorner", CloseButton)
CloseCorner.CornerRadius = UDim.new(0, 8)

CloseButton.MouseEnter:Connect(function()
	TweenService:Create(CloseButton, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(60, 0, 0)}):Play()
end)

CloseButton.MouseLeave:Connect(function()
	TweenService:Create(CloseButton, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(40, 40, 40)}):Play()
end)

CloseButton.MouseButton1Click:Connect(function()
	ScreenGui:Destroy()
end)


    -- Left Tab Panel
    local TabPanel = Instance.new("Frame")
    TabPanel.Size = UDim2.new(0, 100, 1, 0)
    TabPanel.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
    TabPanel.Parent = MainFrame

    local TabLayout = Instance.new("UIListLayout", TabPanel)
    TabLayout.SortOrder = Enum.SortOrder.LayoutOrder
    TabLayout.Padding = UDim.new(0, 8)

    local TabContent = Instance.new("Frame")
    TabContent.Size = UDim2.new(1, -100, 1, 0)
    TabContent.Position = UDim2.new(0, 100, 0, 0)
    TabContent.BackgroundTransparency = 1
    TabContent.Parent = MainFrame

    local Tabs = {}

    function Tabs:AddTab(name, iconId)
        local Button = Instance.new("TextButton")
        Button.Size = UDim2.new(1, 0, 0, 60)
        Button.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
        Button.Text = ""
        Button.AutoButtonColor = false
        Button.Parent = TabPanel

        local ButtonCorner = Instance.new("UICorner", Button)
        ButtonCorner.CornerRadius = UDim.new(0, 10)

        local Icon = Instance.new("ImageLabel")
        Icon.Image = "rbxassetid://" .. tostring(iconId)
        Icon.Size = UDim2.new(0, 24, 0, 24)
        Icon.Position = UDim2.new(0, 10, 0.5, -12)
        Icon.BackgroundTransparency = 1
        Icon.Parent = Button

        local Label = Instance.new("TextLabel")
        Label.Text = name
        Label.Font = Enum.Font.Gotham
        Label.TextSize = 14
        Label.TextColor3 = Color3.fromRGB(220, 220, 220)
        Label.Position = UDim2.new(0, 40, 0.5, -10)
        Label.Size = UDim2.new(1, -40, 0, 20)
        Label.BackgroundTransparency = 1
        Label.TextXAlignment = Enum.TextXAlignment.Left
        Label.Parent = Button

        local Page = Instance.new("Frame")
        Page.Name = name
        Page.Size = UDim2.new(1, 0, 1, 0)
        Page.BackgroundTransparency = 1
        Page.Visible = false
        Page.Parent = TabContent

        local Layout = Instance.new("UIListLayout", Page)
        Layout.SortOrder = Enum.SortOrder.LayoutOrder
        Layout.Padding = UDim.new(0, 10)

        Button.MouseButton1Click:Connect(function()
            for _, v in ipairs(TabContent:GetChildren()) do
                if v:IsA("Frame") then
                    TweenService:Create(v, TweenInfo.new(0.2), {Transparency = 1}):Play()
                    v.Visible = false
                end
            end
            Page.Visible = true
            for _, v in ipairs(Page:GetChildren()) do
                if v:IsA("GuiObject") then
                    v.BackgroundTransparency = 1
                    TweenService:Create(v, TweenInfo.new(0.2), {BackgroundTransparency = 0}):Play()
                end
            end
        end)

        if #TabContent:GetChildren() == 1 then
            Page.Visible = true
        end

        return Page
    end

    function Tabs:AddSlider(tab, name, min, max, default, callback)
        local Frame = Instance.new("Frame", tab)
        Frame.Size = UDim2.new(1, -20, 0, 50)
        Frame.BackgroundTransparency = 1

        local Title = Instance.new("TextLabel", Frame)
        Title.Text = name
        Title.Font = Enum.Font.Gotham
        Title.TextSize = 14
        Title.TextColor3 = Color3.fromRGB(200, 200, 200)
        Title.Size = UDim2.new(1, 0, 0, 20)
        Title.BackgroundTransparency = 1
        Title.TextXAlignment = Enum.TextXAlignment.Left

        local Bar = Instance.new("Frame", Frame)
        Bar.Size = UDim2.new(1, 0, 0, 6)
        Bar.Position = UDim2.new(0, 0, 0, 30)
        Bar.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
        Bar.BorderSizePixel = 0

        local Fill = Instance.new("Frame", Bar)
        Fill.BackgroundColor3 = Color3.fromRGB(100, 180, 255)
        Fill.Size = UDim2.new((default - min)/(max - min), 0, 1, 0)
        Fill.BorderSizePixel = 0

        local dragging = false

        local function update(input)
            local pos = math.clamp((input.Position.X - Bar.AbsolutePosition.X) / Bar.AbsoluteSize.X, 0, 1)
            Fill.Size = UDim2.new(pos, 0, 1, 0)
            local val = math.floor((min + (max - min) * pos) + 0.5)
            callback(val)
        end

        Bar.InputBegan:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.MouseButton1 then
                dragging = true
                update(input)
                input.Changed:Connect(function()
                    if input.UserInputState == Enum.UserInputState.End then
                        dragging = false
                    end
                end)
            end
        end)

        UserInputService.InputChanged:Connect(function(input)
            if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
                update(input)
            end
        end)
    end

    return Tabs
end

return Library
